## {mojo} Что такое эмиссивная текстура?
Эмиссивная текстура - это текстура, которая "светится" в темноте, но сама при этом не издаёт свет вокруг себя, как, например, светящийся спрут или глаза эндермена в ванильном майне.

## Как делать эмиссивные текстуры?
Есть два способа - с помощью оптифайнового метода и ванильного метода.
**Оптифайн метод**:
- \+ Очень простой
- \- Работает только когда установлен Optifine
Чтобы использовать этот метод, надо создать специальный файл в рп - `assets/minecraft/optifine/emissive.properties`. В него нужно вписать такое содержимое:
```properties
suffix.emissive=_e
```
Теперь все текстуры, которые в названии файла имеют суффикс `_e`, будут эмиссивными. Например, если надо сделать глаза зомби белыми и эмиссивными, а всё остальное нет, то в текстуре `zombie.png` будет текстура всего зомби, а в текстуре `zombie_e.png` в той же папке будет текстура глаз и больше ничего. Если нужно чтоб вся текстура чего то была эмиссивной, достаточно просто дописать суффикс `_e` к названию файла.
---separator---
**Ванильный метод**:
- + Работает в полной ванилле
- +- Использует ванильные шейдеры, из-за чего он скорее всего не будет работать вместе с установленным оптифайном.
- + Имеет больше настроек, несколько типов эмиссивности.
Чтобы использовать этот метод, надо зайти на [этот гитхаб репо](<https://github.com/ShockMicro/VanillaDynamicEmissives>) и скачать из него рп. Для этого нажмите на зелёную кнопку Code → Download ZIP. После этого распакуйте рп, в нём вы найдёте две папки - `shaders` и `textures`, во второй находятся только примеры использования метода, а вот для работы метода понадобится именно папка `shaders`, её нужно закинуть к себе в рп. Далее:
- Если вам нужна полноценная эмиссивность, то в вашей текстуре всем пикселям, которые должны быть эмиссивными, надо выставить значение прозрачности (alpha) на `252`. Примерами на картинке являются голова зомби, редстоун руда, листья азалии и блейз род. Не волнуйтесь насчёт полупрозрачности - ванильные шейдеры в процессе обработки снова сделают все пиксели полностью непрозрачными. **Если вам большего не надо, дальше можете не читать.**
---separator---
- Если вам нужна неполная эмиссивность, то есть текстура будет светится, но и уровень освещения также будет влиять на неё, то надо выставить значение прозрачности на `250`. Примером на картинке является лаймовый бетон.
- Если вам нужно, чтобы полупрозрачная текстура имела эмиссивность, уже придётся потрудиться чуть больше. В примере используется блок льда - обычно у его текстуры в майне прозрачность `190` (далее - "итоговая прозрачнсость"), но если посмотреть на текстуру в примере, то у неё все пиксели имеют прозрачность `251` (далее - "входная прозрачность"). Дело в том, что в шейдерах указано, что все пиксели с входной прозрачностью `251` будут эмиссивными и их итоговая прозрачность будет после этого равняться `190`, таким образом возвращая обычную прозрачность блока льда и при этом добавляя эмиссивность.
Чтобы изменить значение итоговой прозрачности, надо зайти в файл `assets/minecraft/shaders/include/emissive_utils.glsl` и найти там 80 строку. Там будет написано `if (inputAlpha == 251) return 190.0;`, что и является проверкой "если входная прозрачность равна 251, то сделать итоговую прозрачность 190". Поэтому, чтоб изменить итоговую прозрачность, достаточно просто изменить само число `190.0` на то, что вам нужно. Если же вам надо добавить больше одного значения итоговой прозрачности, которое должно быть эмиссивным, то кроме вышесказанного надо скопировать 80 строку, вставить в тоже самое место, в этой строке поменять число `190` на нужную итоговую прозрачность, например `112`, число `251` поменять на удобное число входной прозрачности, например `249`, и в строке 95 также добавить проверку на новое число входной прозрачности. Таким образом, после всех этих махинаций часть этого файла будет выглядеть примерно так:
---separator---
```glsl
float remap_alpha(int inputAlpha) {
    
    if (inputAlpha == 252) return 255.0;
    if (inputAlpha == 251) return 190.0; // Та самая 80 строка
    if (inputAlpha == 249) return 112.0; // Мною добавленная новая строка
    if (inputAlpha == 250) return 255.0;
    
    return inputAlpha;
}

vec4 make_emissive(vec4 inputColor, vec4 lightColor, vec4 faceLightColor, int inputAlpha) {

    if(face_lighting_check(inputAlpha)) inputColor *= faceLightColor;

    if (inputAlpha == 252) return inputColor;
    if (inputAlpha == 251 || inputAlpha == 249) return apply_partial_emissivity(inputColor, lightColor, vec3(0.411, 0.345, 0.388)); // В этой строке я добавил проверку на прозрачность 249 - "|| inputAlpha == 249"
    
    return inputColor * lightColor;
}
```